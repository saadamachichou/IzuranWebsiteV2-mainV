<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta http-equiv="Permissions-Policy" content="encrypted-media=*, autoplay=*" />
    <title>Izuran - Amazigh Music & Culture</title>
    
    <!-- Favicon declarations - Multiple sizes for better visibility -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico?v=1" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1" />
    <link rel="apple-touch-icon" href="/favicon.ico?v=1" />
    
    <!-- Additional favicon sizes for better visibility -->
    <link rel="icon" type="image/png" sizes="16x16" href="/izuran_logo.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/izuran_logo.png" />
    <link rel="icon" type="image/png" sizes="48x48" href="/izuran_logo.png" />
    <link rel="icon" type="image/png" sizes="64x64" href="/izuran_logo.png" />
    
    <!-- High-DPI favicon for retina displays -->
    <link rel="icon" type="image/png" sizes="96x96" href="/izuran_logo.png" />
    
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#FFA500" />
    
    <!-- Preload critical font for faster LCP -->
    <link rel="preload" href="/fonts/DOS_Amazigh-1.ttf" as="font" type="font/ttf" crossorigin="anonymous" />
    
    <!-- Resource hints for faster API connections -->
    <link rel="preconnect" href="http://localhost:3000" />
    <link rel="dns-prefetch" href="http://localhost:3000" />
    
    <!-- Load bfcache patch asynchronously to not block initial render -->
    <script src="/bfcache-patch.js" defer></script>
    <!-- Initial loading spinner (amber theme) - replaced by React when app mounts -->
    <style>
      @keyframes izuran-spin { to { transform: rotate(360deg); } }
      #root .izuran-loading-spinner {
        width: 48px; height: 48px;
        border: 3px solid rgba(245, 158, 11, 0.2);
        border-top-color: #f59e0b;
        border-radius: 50%;
        animation: izuran-spin 0.8s linear infinite;
      }
    </style>
  </head>
  <body>
    <div id="root">
      <div style="display:flex;align-items:center;justify-content:center;min-height:100vh;background:#0a0a0a">
        <div class="izuran-loading-spinner" aria-hidden="true"></div>
      </div>
    </div>
    <script>
      window.__showAppError = function(msg, err) {
        var root = document.getElementById('root');
        if (root) {
          var detail = (err && (err.stack || err.message || String(err))) || '';
          root.innerHTML = '<div style="padding:24px;font-family:system-ui,sans-serif;background:#0f0f0f;color:#e5e5e5;min-height:100vh;line-height:1.5"><h2 style="color:#f97316;margin:0 0 12px">Something went wrong</h2><p style="margin:0 0 8px">' + (msg || 'Unknown error') + '</p><pre style="margin:0;padding:12px;background:#1a1a1a;border-radius:6px;overflow:auto;font-size:12px;white-space:pre-wrap;word-break:break-all">' + (detail || 'No details') + '</pre></div>';
        }
      };
      window.onerror = function(msg, url, line, col, err) {
        window.__showAppError(msg, err);
        return false;
      };
      window.addEventListener('unhandledrejection', function(e) {
        var r = e.reason;
        window.__showAppError(r && (r.message || String(r)), r);
      });
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>